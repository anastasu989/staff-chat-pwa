
  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getMessaging, getToken, onMessage } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-messaging.js";

  // üîë –¢–í–û–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø FIREBASE
  const firebaseConfig = {
  apiKey: "AIzaSyDYjTq4Byv_HvpSymIq7myrdnvSCbetxc8",
  authDomain: "anastasia-b2c21.firebaseapp.com",
  projectId: "anastasia-b2c21",
  storageBucket: "anastasia-b2c21.firebasestorage.app",
  messagingSenderId: "219596761766",
  appId: "1:219596761766:web:aecd1431a8741559c3a267",
  };

  // 1Ô∏è‚É£ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  const app = initializeApp(firebaseConfig);
  const messaging = getMessaging(app);

  // 2Ô∏è‚É£ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º service worker
  const registration = await navigator.serviceWorker.register("/service-worker.js");

  // 3Ô∏è‚É£ –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
  const permission = await Notification.requestPermission();
  if (permission !== "granted") {
    alert("–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞–ø—Ä–µ—â–µ–Ω—ã");
    return;
  }

  // 4Ô∏è‚É£ –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω
  const token = await getToken(messaging, {
    vapidKey: "BPoYE3iTbozRMvvuY9EaruLemKT7BkQ_48Ps0nYCFXIDpkg8hF_ygrWnukcFgDchC2RJfr9fUNIzqcsoyC9o9P4",
    serviceWorkerRegistration: registration
  });

  console.log("FCM TOKEN:", token);

  // 5Ô∏è‚É£ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–º —Å–∞–π—Ç–µ
  onMessage(messaging, (payload) => {
    console.log("–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ:", payload);
    alert(payload.notification.title);
  });
</script>
